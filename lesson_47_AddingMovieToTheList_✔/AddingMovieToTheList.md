# ‚úÖ –£—Ä–æ–∫ 43: –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å–º—É –¥–æ —Å–ø–∏—Å–∫—É TelegramBot

---
<img src="main_image.png" alt="pygame" width="1500">

## –ó–º—ñ—Å—Ç —É—Ä–æ–∫—É:

1. [–°—å–æ–≥–æ–¥–Ω—ñ –Ω–∞ —É—Ä–æ—Ü—ñ](#1-—Å—å–æ–≥–æ–¥–Ω—ñ-–Ω–∞-—É—Ä–æ—Ü—ñ)
2. [–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥–∏ `create_film`](#2-—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è-–∫–æ–º–∞–Ω–¥–∏-create_film)
3. [–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ `data.json`](#3-–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è-—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó-–≤-datajson)
4. [–ü—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ø—ñ–¥—Å—É–º–∫—ñ–≤ üöÄ](#4-–ø—ñ–¥–≤–µ–¥–µ–Ω–Ω—è-–ø—ñ–¥—Å—É–º–∫—ñ–≤-)

---

## 1. –°—å–æ–≥–æ–¥–Ω—ñ –Ω–∞ —É—Ä–æ—Ü—ñ

> üí° –ù–∞ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ —Ç–µ–º–∏:

- –Ø–∫ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏, —â–æ–± –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ñ—ñ–ª—å–º–∏ –¥–æ —Å–ø–∏—Å–∫—É –≤ **TelegramBot**.
- –Ø–∫ –æ–±—Ä–æ–±–ª—è—Ç–∏ –≤–≤–µ–¥–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –¥–∞–Ω—ñ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —É —Ñ–∞–π–ª—ñ.

–ù–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ –Ω–∞–≤—á–∏–ª–∏—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤ —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ–∂–µ–Ω –∑
–Ω–∏—Ö.

–¢–µ–ø–µ—Ä –º–∏ –ø–µ—Ä–µ–π–¥–µ–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫—Ä–æ–∫—É - **–¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å–º—ñ–≤** –¥–æ —Å–ø–∏—Å–∫—É, —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ
–æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –∑ —Ñ—ñ–ª—å–º–∞–º–∏.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 2. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥–∏ `create_film`

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –∫–æ–º–∞–Ω–¥—É `create_film` –≤ –º–æ–¥—É–ª—ñ `commands.py`.

```python
# Old code
from aiogram.filters import Command
from aiogram.types.bot_command import BotCommand

FILMS_COMMAND = Command('films')
START_COMMAND = Command('start')

FILMS_BOT_COMMAND = BotCommand(command='films', description="–ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤")
START_BOT_COMMAND = BotCommand(command='start', description="–ü–æ—á–∞—Ç–∏ —Ä–æ–∑–º–æ–≤—É")
```

```python
# New code
from aiogram.filters import Command
from aiogram.types.bot_command import BotCommand

FILMS_COMMAND = Command('films')
START_COMMAND = Command('start')
FILM_CREATE_COMMAND = Command("create_film")

BOT_COMMANDS = [
    BotCommand(command="films", description="–ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤"),
    BotCommand(command="start", description="–ü–æ—á–∞—Ç–∏ —Ä–æ–∑–º–æ–≤—É"),
    BotCommand(command="create_film", description="–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Ñ—ñ–ª—å–º"),
]
```

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ —ñ–º–ø–æ—Ä—Ç–∏ –≤ –º–æ–¥—É–ª—ñ `bot.py`.

```python
# Old code
from commands import (FILMS_COMMAND, START_COMMAND, FILMS_BOT_COMMAND, START_BOT_COMMAND)
```

```python
# New code
from commands import (FILMS_COMMAND, START_COMMAND, FILM_CREATE_COMMAND, BOT_COMMANDS)
```

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–æ –≥–æ–ª–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó `main()`.

```python
# Old code
async def main() -> None:
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∑ —Ç–æ–∫–µ–Ω–æ–º —Ç–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    bot = Bot(token=TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))
    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∫–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞
    await bot.set_my_commands([FILMS_BOT_COMMAND, START_BOT_COMMAND])

    # –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ü–∏–∫–ª –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω—å
    await dp.start_polling(bot)
```

```python
# New code
async def main() -> None:
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∑ —Ç–æ–∫–µ–Ω–æ–º —Ç–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    bot = Bot(token=TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))
    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∫–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞
    await bot.set_my_commands(BOT_COMMANDS)
    # –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ü–∏–∫–ª –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω—å
    await dp.start_polling(bot)
```

–î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ñ—ñ–ª—å–º—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ –≤ –º–æ–¥—É–ª—å `bot.py`.

```python
from aiogram.fsm.context import FSMContext
from aiogram.fsm.state import State, StatesGroup
```

```python
# Old code
from aiogram.types import Message, CallbackQuery, URLInputFile

# New code
from aiogram.types import Message, CallbackQuery, URLInputFile, ReplyKeyboardRemove
```

–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–æ
FSMContext [(Finite State Machine)](https://docs.aiogram.dev/en/latest/dispatcher/finite_state_machine/)

–°—Ç–≤–æ—Ä–∏–º–æ —Ñ–æ—Ä–º—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ñ—ñ–ª—å–º–∏ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –º–æ–¥—É–ª—ñ `bot.py`.

```python
class FilmForm(StatesGroup):
    name = State()
    description = State()
    rating = State()
    genre = State()
    actors = State()
    poster = State()
```

–°—Ç–≤–æ—Ä–∏–º–æ —Ñ—É–Ω–∫—Ü—ñ—é `film_create()` –≤ –º–æ–¥—É–ª—ñ `bot.py`, —è–∫ –æ–±—Ä–æ–±–Ω–∏–∫ –∫–æ–º–∞–Ω–¥–∏ `/create_film` —Ç–∞ –¥–æ–¥–∞–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ
–ø–æ–ª—è —Ñ–æ—Ä–º–∏.

```python
@dp.message(FILM_CREATE_COMMAND)
async def film_create(message: Message, state: FSMContext) -> None:
    await state.set_state(FilmForm.name)
    await message.answer(
        f"<b>–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ñ—ñ–ª—å–º—É ...</b>",
        reply_markup=ReplyKeyboardRemove(),
    )


@dp.message(FilmForm.name)
async def film_name(message: Message, state: FSMContext) -> None:
    await state.update_data(name=message.text)
    await state.set_state(FilmForm.description)
    await message.answer(
        f"<b>–í–≤–µ–¥—ñ—Ç—å –æ–ø–∏—Å —Ñ—ñ–ª—å–º—É ...</b>",
        reply_markup=ReplyKeyboardRemove(),
    )


@dp.message(FilmForm.description)
async def film_description(message: Message, state: FSMContext) -> None:
    await state.update_data(description=message.text)
    await state.set_state(FilmForm.rating)
    await message.answer(
        f"<b>–í–∫–∞–∂—ñ—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ —Ñ—ñ–ª—å–º—É (–≤—ñ–¥ 0 –¥–æ 10) ...</b>",
        reply_markup=ReplyKeyboardRemove(),
    )


@dp.message(FilmForm.rating)
async def film_rating(message: Message, state: FSMContext) -> None:
    await state.update_data(rating=float(message.text))
    await state.set_state(FilmForm.genre)
    await message.answer(
        f"<b>–í–≤–µ–¥—ñ—Ç—å –∂–∞–Ω—Ä —Ñ—ñ–ª—å–º—É ...</b>",
        reply_markup=ReplyKeyboardRemove(),
    )


@dp.message(FilmForm.genre)
async def film_genre(message: Message, state: FSMContext) -> None:
    await state.update_data(genre=message.text)
    await state.set_state(FilmForm.actors)
    await message.answer(
        text=f"<b>–í–≤–µ–¥—ñ—Ç—å –∞–∫—Ç–æ—Ä—ñ–≤ —Ñ—ñ–ª—å–º—É —á–µ—Ä–µ–∑ `, ` \n‚ö†Ô∏è (–û–±–æ–≤'—è–∑–∫–æ–≤–∞ –∫–æ–º–∞ —Ç–∞ –≤—ñ–¥—Å—Ç—É–ø –ø—ñ—Å–ª—è –Ω–µ—ó)</b>",
        reply_markup=ReplyKeyboardRemove(),
    )


@dp.message(FilmForm.actors)
async def film_actors(message: Message, state: FSMContext) -> None:
    await state.update_data(actors=[x for x in message.text.split(", ")])
    await state.set_state(FilmForm.poster)
    await message.answer(
        f"<b>–í–≤–µ–¥—ñ—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø–æ—Å—Ç–µ—Ä —Ñ—ñ–ª—å–º—É ...</b>",
        reply_markup=ReplyKeyboardRemove(),
    )


@dp.message(FilmForm.poster)
async def film_poster(message: Message, state: FSMContext) -> None:
    data = await state.update_data(poster=message.text)
    film = Film(**data)
    add_film(film.model_dump())
    await state.clear()
    await message.answer(
        f"–§—ñ–ª—å–º {film.name} —É—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–æ ‚úÖ",
        reply_markup=ReplyKeyboardRemove(),
    )
```

–ö–æ–ª–∏ –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –±–æ—Ç, —è–∫–∏–π –∑–±–∏—Ä–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–ø–æ—á–∞—Ç–∫—É **–Ω–∞–∑–≤–∞** —Ñ—ñ–ª—å–º—É,
–ø–æ—Ç—ñ–º **–æ–ø–∏—Å**, **—Ä–µ–π—Ç–∏–Ω–≥** —ñ —Ç–∞–∫ –¥–∞–ª—ñ), –Ω–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏, –Ω–∞ —è–∫–æ–º—É –µ—Ç–∞–ø—ñ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á.

- –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –µ—Ç–∞–ø—É –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **"–º–∞—à–∏–Ω–∏ —Å—Ç–∞–Ω—ñ–≤"**.
- –ö–æ–∂–µ–Ω –æ–±—Ä–æ–±–Ω–∏–∫, –æ–∫—Ä—ñ–º –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ, –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Å—Ç–∞–Ω, –ø–æ —á–µ—Ä–∑—ñ.
- –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤—É —Ñ—ñ–ª—å–º—É, –±–æ—Ç –∑–±–µ—Ä—ñ–≥–∞—î —Ü—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —ñ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –æ–ø–∏—Å—É —Ñ—ñ–ª—å–º—É.
- –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –Ω–∞—Å—Ç—É–ø–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –±—É–¥–µ –æ–±—Ä–æ–±–ª—è—Ç–∏—Å—è —Ñ—É–Ω–∫—Ü—ñ—î—é, —è–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –æ–ø–∏—Å —Ñ—ñ–ª—å–º—É.

–û–±—Ä–æ–±–Ω–∏–∫ `film_poster` —î –æ—Å—Ç–∞–Ω–Ω—ñ–º –∫—Ä–æ–∫–æ–º —É –∑–±–æ—Ä—ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ñ—ñ–ª—å–º.

- –ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø–æ—Å—Ç–µ—Ä —Ñ—ñ–ª—å–º—É, –±–æ—Ç –∑–±–µ—Ä—ñ–≥–∞—î –≤—Å—ñ –¥–∞–Ω—ñ, —è–∫—ñ –±—É–ª–∏ –≤–≤–µ–¥–µ–Ω—ñ —Ä–∞–Ω—ñ—à–µ (**–Ω–∞–∑–≤–∞, –æ–ø–∏—Å,
  —Ä–µ–π—Ç–∏–Ω–≥, –∂–∞–Ω—Ä, –∞–∫—Ç–æ—Ä–∏, –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø–æ—Å—Ç–µ—Ä**) —É –∑–º—ñ–Ω–Ω—É `data`.
- –ü—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö, –±–æ—Ç –æ—á–∏—â–∞—î –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Ç–æ–±—Ç–æ **"–∑–∞–±—É–≤–∞—î"** –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω, —â–æ–± –±—É—Ç–∏ –≥–æ—Ç–æ–≤–∏–º –¥–æ –Ω–æ–≤–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó –∑
  –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.
- –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –±–æ—Ç –∑–∞–≤–µ—Ä—à–∏–≤ –ø—Ä–æ—Ü–µ—Å –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö –ø—Ä–æ —Ñ—ñ–ª—å–º —ñ –≥–æ—Ç–æ–≤–∏–π –ø–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞—Ö–æ—á–µ –¥–æ–¥–∞—Ç–∏ —â–µ
  –æ–¥–∏–Ω —Ñ—ñ–ª—å–º.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 3. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ `data.json`

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –º–æ–¥—É–ª—å `data.py`, –¥–ª—è —Ç–æ–≥–æ, —â–æ–± —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –Ω–æ–≤–∏–π —Ñ—ñ–ª—å–º –ø–æ—Ç—Ä–∞–ø–∏–ª–∞ –≤ —Ñ–∞–π–ª `data.json`.

```python
# –Ü–º–ø–æ—Ä—Ç –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ json
import json


#  –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤
def get_films(file_path: str = "data.json", film_id: int | None = None) -> list[dict] | dict:
    with open(file_path, 'r') as fp:
        films = json.load(fp)
        if film_id is not None and film_id < len(films):
            return films[film_id]
        return films


#  –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ñ—ñ–ª—å–º—É —É —Å–ø–∏—Å–æ–∫
def add_film(film: dict, file_path: str = "data.json"):
    films = get_films(file_path=file_path, film_id=None)
    if films:
        films.append(film)
        with open(file_path, "w") as fp:
            json.dump(films, fp, indent=4, ensure_ascii=False)
```

–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó –≤ –º–æ–¥—É–ª—å `bot.py`.

```python
# Old string
from data import get_films

# New string
from data import get_films, add_film
```

–ó–∞–ø—É—Å–∫–∞—î–º–æ –Ω–∞—à—É –ø—Ä–æ–≥—Ä–∞–º—É —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∑–º—ñ–Ω–∏ –≤ **TelegramBot**.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)

---

## 4. –ü—ñ–¥–≤–µ–¥–µ–Ω–Ω—è –ø—ñ–¥—Å—É–º–∫—ñ–≤ üöÄ

> –ù–∞ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ –≤–∏–≤—á–∏–ª–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ —Ç–µ–º–∏:

- –ù–∞–≤—á–∏–≤—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É `/create_film` –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å–º—ñ–≤ —É **TelegramBot**.
- –†–æ–∑–≥–ª—è–Ω—É–ª–∏, —è–∫ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —á–µ—Ä–µ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞–Ω—ñ —É —Ñ–∞–π–ª.
- –í–∏–≤—á–∏–ª–∏ –æ—Å–Ω–æ–≤–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó –±–æ—Ç–∞ –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ —Ç–∞ —Ä–æ–±–æ—Ç—É –∑ –¥–∞–Ω–∏–º–∏, —â–æ —î –≤–∞–∂–ª–∏–≤–∏–º –µ—Ç–∞–ø–æ–º —É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞
  –∫–æ—Ä–∏—Å–Ω–æ–≥–æ **TelegramBot**.

> –¢–µ–ø–µ—Ä –Ω–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∑–¥–∞—Ç–µ–Ω –Ω–µ —Ç—ñ–ª—å–∫–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ñ—ñ–ª—å–º—ñ–≤ —Ç–∞ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø–æ –∫–æ–∂–Ω–æ–º—É –∑ –Ω–∏—Ö,
> –∞–ª–µ –π –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–≤–µ–¥–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –¥–∞–Ω–∏—Ö.

[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–º—ñ—Å—Ç—É](#–∑–º—ñ—Å—Ç-–∫–æ–Ω—Å–ø–µ–∫—Ç—É)


